datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id       Int    @id @default(autoincrement())
    username String @unique
    Team     Team?  @relation(fields: [teamId], references: [id])
    teamId   Int?
}

model Team {
    id   Int    @id @default(autoincrement())
    name String @unique
    abrv String @unique
    User User[]
}

model Flag {
    id                 Int        @id @default(autoincrement())
    name               String     @unique
    hint               String
    secret             String     @db.Text
    max_collectors     Int
    current_collectors Int        @default(0)
    TeamFlags          TeamFlags? @relation(fields: [teamFlagsId], references: [id])
    teamFlagsId        Int?
}

model TeamFlags {
    id          Int      @id @default(autoincrement())
    teamId      Int
    flagId      Int
    Flag        Flag[]
    collectedAt DateTime
}
